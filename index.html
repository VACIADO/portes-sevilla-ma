<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Portes, Mudanzas y Vaciados en Sevilla</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      margin: 0;
      padding: 20px;
    }
    .container {
      max-width: 800px;
      margin: auto;
      background-color: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    h1, h2 {
      text-align: center;
    }
    ul {
      font-size: 16px;
      line-height: 1.6;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 16px;
      margin-bottom: 20px;
    }
    table th, table td {
      border-bottom: 1px solid #ccc;
      padding: 8px;
      text-align: center;
    }
    input, textarea {
      width: 100%;
      margin-bottom: 10px;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 15px;
      box-sizing: border-box;
    }
    label {
      display: flex;
      align-items: center;
      margin-bottom: 5px;
      font-size: 15px;
      cursor: pointer;
    }
    input[type="checkbox"] {
      margin-right: 10px;
      width: 18px;
      height: 18px;
      position: relative;
      top: 1px;
    }
    button {
      background-color: #007BFF;
      color: white;
      padding: 10px 15px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      width: 100%;
      transition: background-color 0.3s ease;
    }
    button:hover {
      background-color: #0056b3;
    }
    .whatsapp-button {
      background-color: #25D366;
      color: white;
      padding: 12px 20px;
      text-decoration: none;
      border-radius: 5px;
      font-size: 18px;
      display: inline-block;
      text-align: center;
      margin-top: 20px;
    }
    #resultado {
      font-size: 18px;
      font-weight: bold;
      color: green;
      margin-top: 10px;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>🚚 Portes, Mudanzas y Vaciados en Sevilla</h1>
    <p style="text-align: center; font-size: 18px;">
      Servicio rápido, profesional y económico en Sevilla y alrededores. Llámanos o escríbenos por WhatsApp para presupuesto inmediato.
    </p>

    <h2>📋 Servicios</h2>
    <ul>
      <li>✅ Porte local (solo transporte) — 30 €</li>
      <li>✅ Carga y descarga — 20 €</li>
      <li>✅ Mudanza en Sevilla — 50 €</li>
      <li>✅ Vaciado piso mediano — 80 €</li>
      <li>✅ Vaciado de nave — 100 €</li>
      <li>✅ Limpieza post-vaciado — 60 €</li>
      <li>✅ Pintura de piso/trastero/nave — 90 €</li>
    </ul>

    <h2>💬 Calcula tu presupuesto</h2>
    <div style="border: 1px solid #ccc; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
      <label for="nombre">Nombre completo:</label>
      <input type="text" id="nombre" placeholder="Tu nombre" />

      <label for="telefono">Número WhatsApp:</label>
      <input type="tel" id="telefono" placeholder="Ej: tu número" />

      <label><input type="checkbox" class="option" data-name="Porte local (solo transporte)" data-price="30"> Porte local (solo transporte)</label><br>
      <label><input type="checkbox" class="option" data-name="Carga y descarga" data-price="20"> Carga y descarga</label><br>
      <label><input type="checkbox" class="option" data-name="Mudanza en Sevilla" data-price="50"> Mudanza en Sevilla</label><br>
      <label><input type="checkbox" class="option" data-name="Vaciado piso mediano" data-price="80"> Vaciado piso mediano</label><br>
      <label><input type="checkbox" class="option" data-name="Vaciado de nave" data-price="100"> Vaciado de nave</label><br>
      <label><input type="checkbox" class="option" data-name="Limpieza post-vaciado" data-price="60"> Limpieza post-vaciado</label><br>
      <label><input type="checkbox" class="option" data-name="Pintura de piso/trastero/nave" data-price="90"> Pintura de piso/trastero/nave</label><br><br>

      <label for="origen">Dirección origen:</label>
      <input type="text" id="origen" placeholder="Introduce dirección origen" />

      <label for="destino">Dirección destino:</label>
      <input type="text" id="destino" placeholder="Introduce dirección destino" />

      <label for="kilometros">Kilómetros aproximados:</label>
      <input type="number" id="kilometros" placeholder="Ej: 15" min="0" step="0.1" />

      <label for="precioEstimado">Precio estimado (€):</label>
      <input type="number" id="precioEstimado" placeholder="Ej: 60" min="0" step="0.01" />

      <label for="notas">Notas adicionales:</label>
      <textarea id="notas" placeholder="Ej: Es una mudanza con cajas, sofá y nevera. Hay ascensor."></textarea>

      <button onclick="enviarSolicitud()">Solicitar Presupuesto</button>

      <p id="resultado"></p>
      <p style="text-align:center;">💬 Te mandamos el presupuesto por WhatsApp</p>
    </div>

    <h2>📞 Contacto directo</h2>
    <p style="font-size: 18px;">
      📞 <strong>WhatsApp:</strong> <a href="https://wa.me/34698373471" target="_blank" rel="noopener noreferrer">Haz clic aquí para escribirnos</a><br />
      📧 <strong>Email:</strong> <a href="mailto:portemudanzayvaciadoprosevilla@gmail.com">portemudanzayvaciadoprosevilla@gmail.com</a><br />
      📷 <strong>Instagram:</strong> <a href="https://www.instagram.com/portemudanzayvaciadoprosevilla" target="_blank" rel="noopener noreferrer">@portemudanzayvaciadoprosevilla</a><br />
      📍 <strong>Ubicación:</strong> Sevilla y alrededores
    </p>

    <div style="text-align: center; margin-top: 30px;">
      <a href="https://wa.me/34698373471" target="_blank" class="whatsapp-button" rel="noopener noreferrer">
        💬 Escríbenos por WhatsApp
      </a>
    </div>
  </div>

  <script>
    function enviarSolicitud() {
      const nombre = document.getElementById('nombre').value.trim();
      const telefono = document.getElementById('telefono').value.trim();
      const origen = document.getElementById('origen').value.trim();
      const destino = document.getElementById('destino').value.trim();
      const kilometros = document.getElementById('kilometros').value.trim();
      const precioEstimado = document.getElementById('precioEstimado').value.trim();
      const notas = document.getElementById('notas').value.trim();

      if (!nombre || !telefono || !origen || !destino) {
        alert('Por favor, completa todos los campos obligatorios.');
        return;
      }

      const opciones = document.querySelectorAll('.option');
      let seleccionadas = [];
      let totalPrecio = 0;
      opciones.forEach(op => {
        if (op.checked) {
          seleccionadas.push(op.dataset.name);
          totalPrecio += parseFloat(op.dataset.price);
        }
      });

      if (seleccionadas.length === 0) {
        alert('Por favor, selecciona al menos un servicio.');
        return;
      }

      // Si el usuario no ha puesto precio estimado, lo calculamos sumando precios básicos
      let precioFinal = precioEstimado ? parseFloat(precioEstimado) : totalPrecio;

      const serviciosTexto = seleccionadas.join(', ');

      const mensajeWhats = `Hola, soy ${nombre}.
Solicito presupuesto para:
Servicios: ${serviciosTexto}
Dirección origen: ${origen}
Dirección destino: ${destino}
Kilómetros aproximados: ${kilometros || 'No indicado'}
Precio estimado: ${precioFinal.toFixed(2)} €
Notas: ${notas}
Número para contacto: ${telefono}`;

      const numeroTuWhats = '34698373471';
      const urlWhats = `https://wa.me/${numeroTuWhats}?text=${encodeURIComponent(mensajeWhats)}`;
      window.open(urlWhats, '_blank');

      fetch('https://formspree.io/f/mwpqwvlr', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },
        body: JSON.stringify({
          nombre,
          telefono,
          servicios: serviciosTexto,
          origen,
          destino,
          kilometros,
          precioEstimado: precioFinal.toFixed(2),
          notas
        })
      })
      .then(response => {
        if (response.ok) {
          document.getElementById('resultado').textContent = 'Solicitud enviada por email y WhatsApp.';
        } else {
          document.getElementById('resultado').textContent = 'Error enviando email, pero WhatsApp se abrió.';
        }
      })
      .catch(() => {
        document.getElementById('resultado').textContent = 'Error enviando email, pero WhatsApp se abrió.';
      });
    }
  </script>
</body>
</html>
